<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playerport</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script th:src="@{/js/result.js}"></script>
</head>
<body class="min-h-screen bg-white-90 text-gray-600">
<header class="flex items-center justify-between p-4 bg-gray-200">
    <div class="flex items-center">
        <img src="/placeholder.svg" alt="Logo" class="h-8">
        <nav class="ml-4 space-x-4">
            <a href="#" class="text-sm">auth</a>
            <a href="#" class="text-sm">upload</a>
            <a href="#" class="text-sm">Download</a>
            <a href="#" class="text-sm"></a>
        </nav>
    </div>
</header>

<main class="p-4">
    <div class="flex mt-4">
        <div class="w-1/4 p-4">
            <div class="flex items-center space-x-2">
                <img src="/placeholder.svg" alt=" " class="w-16 h-16 rounded-full">
                <div>
                    <div class="text-3xl">개별 진단 결과</div>
                </div>
            </div>
            <div class="mt-40">
                <div th:text="${#dates.format(item.createDt, 'yyyy-MM-dd HH:mm:ss')}" class="ml-44 text-yellow-600">
                    Date
                </div>
                <div class="text-yellow-600 p-2 ml-20">totalCheck<span th:text="${total}"></span>개</div>
            </div>
        </div>


        <div class="w-3/4 p-3">
            <div class="mb-20  bg-gray-200 p-4 rounded">
                <div class="text-l text-gray-600">
                    <span th:text="${serverInfo['SW_TYPE']}">SW_TYPE</span>
                    <div class="text-sm text-gray-600">
                        <span th:text="${serverInfo['SW_NM']}" class="text-yellow-600">SW_NM</span>
                    </div>
                </div>
                <div class="mt-2 text-gray-600">진단 버전 :
                    <div class="text-sm text-gray-600">
                        <span th:text="${serverInfo['SW_INFO']}" class="text-yellow-600">SW_INFO</span>
                    </div>
                </div>
                <div class="mt-2 text-gray-600">HOST_NM :
                    <div class="text-sm text-gray-600">
                        <span th:text="${serverInfo['HOST_NM']}" class="text-yellow-600">HOST_NM</span>
                    </div>
                </div>
                <div class="mt-2 text-gray-600">IP_ADDRESS :
                    <div class="text-sm text-gray-600">
                        <span th:text="${serverInfo['IP_ADDRESS']}" class="text-yellow-600">IP_ADDRESS</span>
                    </div>
                </div>
                <div class="mt-2 text-gray-600">UNIQ_ID :
                    <div class="text-sm text-gray-600">
                        <span th:text="${serverInfo['UNIQ_ID']}" class="text-yellow-600">UNIQ_ID</span>
                    </div>
                </div>
            </div>

            <div class="mt-4 grid-cols-1">
                <div class="flex space-x-4">
                    <div class="w-1/2 bg-gray-200 p-4 rounded grid grid-flow-col gap-4">
                        <div class="mt-2">
                            <div class="grid-cols-1 items-center space-x-2">
                                <div class="w-1/2">
                                    <div class="mt-2">
                                        <div class="text-sm">계정 관리</div>
                                        <div class="text-sm text-gray-400">일반 상위 [67%]</div>
                                        <div class="mt-2">
                                            <div class="text-sm">파일 관리</div>
                                            <div class="text-sm text-gray-400">일반 상위 [67%]</div>
                                        </div>
                                        <div class="mt-2">
                                            <div class="text-sm">서비스 관리</div>
                                            <div class="text-sm text-gray-400">일반 상위 [60%]</div>
                                        </div>
                                        <div class="mt-2">
                                            <div class="text-sm">패치 관리</div>
                                            <div class="text-sm text-gray-400">일반 상위 [68%]</div>
                                        </div>
                                        <div class="mt-2">
                                            <div class="text-sm">로그 관리</div>
                                            <div class="text-sm text-gray-400">일반 상위 [80%]</div>
                                        </div>
                                        <div class="mt-2">
                                            <div class="text-sm">평균 보안 수준</div>
                                            <div class="text-sm text-gray-400">일반 상위 [92%]</div>
                                        </div>
                                        <div class="mt-2">
                                            <div class="text-sm">평균 보안 수준</div>
                                            <div class="text-sm text-gray-400">일반 상위 [92%]</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="grid-cols-2 flex items-center space-x-2 grid-cols-2">
                            <div class="text-sm">
                                <div class="text-lg text-pink-400">
                                    <canvas id="c"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="w-1/2 bg-gray-200 p-4 rounded ">
                        <div class="flex items-center space-x-1 ">
                            <div class="mt-2 w-10">
                                <div class="text-sm">양호</div>
                                <div class="bg-green-500 p-1 w-7 rounded mt-2"></div>
                            </div>
                            <div class="mt-2 w-10">
                                <div class="text-sm">N/A</div>
                                <div class="bg-yellow-500 p-1 w-7 rounded mt-2"></div>
                            </div>
                            <div class="mt-2 w-10">
                                <div class="text-sm">취약</div>
                                <div class="bg-red-600 p-1 w-7 rounded mt-2"></div>
                            </div>
                        </div>
                        <div class="mt-5 h-40"><p class="text-center text-pink-400">그래프</p></div>
                        <div class="flex mt-2 h-11">
                            <div class="text-sm w-60 ml-32">영역별 통계
                                <table>
                                    <thead>
                                    <tr>
                                        <th>구분</th>
                                        <th>보안지수</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <!-- 각 카테고리별 보안 지수를 표시하는 행을 반복 생성합니다 -->
                                    <tr th:each="entry : ${categorySecurityIndices}">
                                        <td th:text="${entry.key}"></td>
                                        <td th:text="${entry.value} + '%'"></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div class="text-sm w-60 ml-20">UNIX 평균 보안 수준
                                <table>
                                    <thead>
                                    <tr>
                                        <th>구 분</th>
                                        <th>평균</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>Unix</td>
                                        <td th:text="${overallSecurityIndex}"></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class = "mt-3 h-5">
                            <span th:text="${safeCount}">양호 :</span>
                        </div>
                        <div class = "mt-3 h-5">
                            <span th:text="${vulnerableCount}">취약 :</span>
                        </div>
                        <div class = "mt-3 h-5">
                            <span th:text="${vulnerableCount}">Others :</span>
                        </div>
                        <div class = "mt-3 h-5">
                            Safe Percentage: <span th:text="${#numbers.formatDecimal(safePercentage, 0, 2)} + '%'"></span>

                        </div>


                    </div>
                </div>
            </div>

            <div class="mt-4 bg-gray-200 p-4 rounded">
                <div class="text-sm">진단 내역 엑셀로 보기</div>
                <div class="mt-2">
                    <p class="text-lg color-red">[전체 내역] </p>
                    <ul>
                        <li th:each="result : ${checkResults}">
                            <h2 th:text="${result['Item']}">Item</h2>
                            <p>Importance: <span th:text="${result['Importance']}"></span></p>
                            <p>Category: <span th:text="${result['Category']}"></span></p>
                            <p>Sub Category: <span th:text="${result['Sub_Category']}"></span></p>
                            <p>Description: <span th:text="${result['Description']}"></span></p>
                            <p>Status: <span th:text="${result['status']}"></span></p>
                            <p>Details: <span th:text="${result['details'][0]}"></span></p>

                            <p th:if="${result['solutions'] != null and #lists.size(result['solutions']) > 0}">
                                Solutions: <span th:text="${result['solutions'][0]}"></span>
                            </p>
                            <div>
                                <h3>Server Info</h3>
                                <p>SW_TYPE: <span th:text="${result['Server_Info']['SW_TYPE']}"></span></p>
                                <p>SW_NM: <span th:text="${result['Server_Info']['SW_NM']}"></span></p>
                                <p>SW_INFO: <span th:text="${result['Server_Info']['SW_INFO']}"></span></p>
                                <p>HOST_NM: <span th:text="${result['Server_Info']['HOST_NM']}"></span></p>
                                <p>DATE: <span th:text="${result['Server_Info']['DATE']}"></span></p>
                                <p>TIME: <span th:text="${result['Server_Info']['TIME']}"></span></p>
                                <p>IP_ADDRESS: <span th:text="${result['Server_Info']['IP_ADDRESS']}"></span></p>
                                <p>UNIQ_ID: <span th:text="${result['Server_Info']['UNIQ_ID']}"></span></p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</main>
</body>
</html>